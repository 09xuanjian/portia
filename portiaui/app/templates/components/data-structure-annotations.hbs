{{#tree-list-item hasChildren=item.annotations.length active=(eq activeModels.item.id item.id) childActive=childActive mouse-enter=(action 'enterItem' item) mouse-leave=(action 'leaveItem' item) as |options|}}
    {{#if (eq options.section "item")}}
        {{yield}}
    {{else if (eq options.section "subtrees")}}
        {{#each item.annotations as |annotation|}}
            {{#if (eq annotation.constructor.modelName "annotation")}}
                {{#tree-list-item active=(eq activeModels.annotation annotation) mouse-enter=(action 'enterAnnotation' annotation) mouse-leave=(action 'leaveAnnotation' item) as |options|}}
                    {{#if (eq options.section "item")}}
                        {{#link-to 'projects.project.spider.sample.annotation' annotation}}
                            {{list-item-icon icon=annotation.type}}
                            {{list-item-badge count=(get (elements-for annotation) 'length') color=annotation.color}}
                            {{list-item-annotation-field annotation=annotation selecting=(mut annotation.new)}}
                            {{#list-item-field-type field=annotation.field}}
                                Change type of selected field
                            {{/list-item-field-type}}
                            {{list-item-icon icon="options"}}
                            {{list-item-icon icon='remove' action=(action 'removeAnnotation' annotation)}}
                        {{/link-to}}
                    {{/if}}
                {{/tree-list-item}}
            {{else if (eq annotation.constructor.modelName "item-annotation")}}
                {{#data-structure-annotations sample=sample item=annotation.item}}
                    {{#link-to 'projects.project.spider.sample.item' annotation.item}}
                        {{list-item-icon icon='schema'}}
                        {{list-item-badge count=(matched-items annotation.item)}}
                        {{list-item-editable value=(mut annotation.name) editing=(mut annotation.new) change=(action 'saveItemAnnotation' annotation)}}
                        {{list-item-item-schema item=annotation.item}}
                        {{list-item-add-annotation-menu item=annotation.item}}
                        {{list-item-icon icon='remove' action=(action 'removeItemAnnotation' annotation)}}
                    {{/link-to}}
                {{/data-structure-annotations}}
            {{/if}}
        {{/each}}
    {{/if}}
{{/tree-list-item}}
